<launch>
    <arg name="robot_name"/>
    <arg name="init_pose"/>
    <!-- On table -x 1.0 -y -0.85 -z 1.0 -R 0 -P 0 -Y 2 -->
    <arg name="urdf_path" default="$(find homestri_robot_description)/urdf/ur5_e_robotiq_2f_85.urdf.xacro"/>

    <!-- send robot urdf to param server -->
    <param name="robot_description" command="$(find xacro)/xacro --inorder '$(arg urdf_path)'"/>
    <!-- <param name="robot_description" textfile="$(arg urdf_path)"/> -->

    <!-- push robot_description to factory and spawn robot in gazebo at the origin, change x,y,z arguments to spawn in a different position -->
    <node name="spawn_gazebo_model" pkg="gazebo_ros" type="spawn_model" args="$(arg init_pose) -urdf -param robot_description -model $(arg robot_name)" respawn="false" output="screen" />

    <!-- Controller utils -->
    <include file="$(find ur_e_gazebo)/launch/controller_utils.launch"/>

    <!-- start this controller -->
    <rosparam file="$(find ur_e_gazebo)/controller/arm_controller_ur5e.yaml" command="load"/>
    <node name="arm_controller_spawner" pkg="controller_manager" type="controller_manager" args="spawn arm_controller" respawn="false" output="screen"/>

    <!-- load other controllers -->
    <node name="ros_control_controller_manager" pkg="controller_manager" type="controller_manager" respawn="false" output="screen" args="load joint_group_position_controller" />

</launch>